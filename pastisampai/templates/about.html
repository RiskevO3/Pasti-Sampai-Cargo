{% extends 'index.html' %}
{% block content %}
<section id="about">
    <div class="container fluid h-100">
        <div class="row">
            <div class="col-md-6">
               <h1>Tentang Kami</h1>
               <h6><span class="fw-bold">Pasti Sampai Express</span> menyediakan layanan jasa logistik yang menjangkau seluruh pulau Jawa dengan dukungan ekosistem yang lengkap. Harapan kami, Pasti Sampai Express dapat menciptakan lapangan kerja untuk mendorong perekonomian nasional.</h6>
               <div class="kontak">
                    <h1>Kontak</h1>
                    <div class="mb-3 d-flex align-items-center">
                        <div>
                            <img src="{{url_for('static',filename='Assets/img/alamat.png')}}" alt="">
                        </div>
                        <a href="#">Ciganitri Indah Residence No C.16, Cipagalo, Bojongsoang, Bandung, Jawa Barat 40287</a>
                    </div>
                    <div class="mb-3 d-flex align-items-center">
                        <div>
                            <img src="{{url_for('static',filename='Assets/img/email.png')}}" alt="">
                        </div>
                        <a href="#">Pastisampaiexpress@gmail.com</a>
                    </div>
                    <div class="mb-3 d-flex align-items-center">
                        <div>
                            <img src="{{url_for('static',filename='Assets/img/tlp.png')}}" alt="">
                        </div>
                        <a href="#">081225510099</a>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="card-about w-100">
                    <h1 class="text-center">Cari Drop Point</h1>
                    <form method="POST">
                    <div class="about-search">
                        {{form.hidden_tag()}}
                        {{form.searchCity(class='input-about',placeholder='Masukkan nama kota')}}
                        {{form.submit(class='search-button',value='')}}
                    </div>
                    </form>
                    <div class="card-about-output mt-4 overflow-auto">
                        <!-- output -->
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}
{% block script %}
<script>
    $(document).ready(function() {
        $('form').submit(function (e) {
            let search_city = document.getElementsByClassName('card-about-output mt-4 overflow-auto')[0]
            search_city.innerHTML = ''
            e.preventDefault(); 
            let url = "{{ url_for('about_page') }}"; // send the form data here.
            console.log(search_city)
            $.ajax({
                type: "POST",
                url: url,
                data: $('form').serialize(), // serializes the form's elements.
                success: function (data) {
                    for (let i = 0; i < data.length; i++){
                        search_city.innerHTML+=(`${i+1}. ${data[i]['address']} | ${data[i]['kabkota_name']} | ${data[i]['cabang_name']} | ${data[i]['kodePos']} <br><br><br>`)
                    }
                },
                error: function(xhr){
                    data = xhr.responseText
                    search_city.innerHTML += data
                }
            });
            // block the traditional submission of the form.
        });

        // Inject our CSRF token into our AJAX request.
        $.ajaxSetup({
            beforeSend: function(xhr, settings) {
                if (!/^(GET|HEAD|OPTIONS|TRACE)$/i.test(settings.type) && !this.crossDomain) {
                    xhr.setRequestHeader("X-CSRFToken", "{{ form.csrf_token._value() }}")
                }
            }
        })
    });
</script>
{% endblock %}